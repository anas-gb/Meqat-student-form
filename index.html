<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meqat Study Consultants - Student Application Form</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <!-- jsPDF and jsPDF Autotable for advanced PDF layout -->
    <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jspdf-autotable@3.8.2/dist/jspdf.plugin.autotable.min.js"></script>
    <style>
        @media print {
            body { margin: 0; padding: 0; }
            .no-print { display: none !important; }
        }
        .form-section {
            border: 2px solid #e5e7eb;
            margin-bottom: 1rem;
            border-radius: 8px;
        }
        .add-btn {
            transition: all 0.3s ease;
        }
        .add-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        .whatsapp-btn {
            background: linear-gradient(135deg, #25D366, #128C7E);
        }
        .whatsapp-btn:hover {
            background: linear-gradient(135deg, #128C7E, #25D366);
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <div class="container mx-auto p-4 max-w-4xl">
        <!-- Header -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <div class="text-center">
                <h1 class="text-3xl font-bold text-blue-800 mb-2">Meqat Study Consultants</h1>
                <p class="text-lg text-gray-600 mb-4">Start your professional journey to a brighter future here</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-700">
                    <div><i class="fas fa-map-marker-alt text-red-500"></i> <strong>KARACHI:</strong> HEAD OFFICE PAKISTAN OFFICE NO: M-1-4, Mezzanine Floor, Jeddah Center, Raja Ghazanfar Ali Rd, Karachi</div>
                    <div><i class="fas fa-map-marker-alt text-red-500"></i> <strong>UNITED KINGDOM:</strong> 38 Harrogate Rd, Nottingham NG37GW,UK</div>
                    <div><i class="fas fa-map-marker-alt text-red-500"></i> <strong>SAUDI ARABIA:</strong> Khobar Eastern Region KSA = 966 50863 3828</div>
                    <div><i class="fas fa-map-marker-alt text-red-500"></i> <strong>Lahore:</strong>Office No, 77, 78, Osama Block,NK Concept School 0322-2613213 </div>
                </div>
            </div>
        </div>

        <form id="applicationForm" class="space-y-6" onsubmit="return false;">
            <!-- Personal Information -->
            <div class="form-section bg-white p-6">
                <h2 class="text-xl font-bold text-blue-800 mb-4 border-b-2 border-blue-200 pb-2">
                    <i class="fas fa-user mr-2"></i>PERSONAL INFORMATION
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Applicant Name</label>
                        <input type="text" id="applicantName" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Date of Birth</label>
                        <input type="date" id="dateOfBirth" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Father's Name</label>
                        <input type="text" id="fatherName" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Marital Status</label>
                        <select id="maritalStatus" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="">Select Status</option>
                            <option value="Single">Single</option>
                            <option value="Married">Married</option>
                            <option value="Divorced">Divorced</option>
                            <option value="Widowed">Widowed</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Mobile No.</label>
                        <input type="tel" id="mobileNo" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                        <input type="email" id="email" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div class="md:col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-1">WhatsApp No.</label>
                        <input type="tel" id="whatsappNo" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                </div>
            </div>

            <!-- Educational Information -->
            <div class="form-section bg-white p-6">
                <h2 class="text-xl font-bold text-blue-800 mb-4 border-b-2 border-blue-200 pb-2">
                    <i class="fas fa-graduation-cap mr-2"></i>EDUCATIONAL INFORMATION
                </h2>
                <div id="qualificationsContainer">
                    <div class="qualification-entry border-l-4 border-blue-500 pl-4 mb-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-3">Qualification 1</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Recent Qualification</label>
                                <input type="text" name="qualification[]" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Year Award</label>
                                <input type="text" name="yearAward[]" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Grade/CGPA</label>
                                <input type="text" name="gradeCgpa[]" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Board/University</label>
                                <input type="text" name="boardUniversity[]" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                        </div>
                    </div>
                </div>
                <button type="button" id="addQualification" class="add-btn bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md mb-4">
                    <i class="fas fa-plus mr-2"></i>Add Another Qualification
                </button>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">English Test</label>
                        <input type="text" id="englishTest" placeholder="e.g., IELTS 7.0, TOEFL 100, PTE 65" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Subject</label>
                        <input type="text" id="subject" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                </div>
            </div>

            <!-- Work Experience -->
            <div class="form-section bg-white p-6">
                <h2 class="text-xl font-bold text-blue-800 mb-4 border-b-2 border-blue-200 pb-2">
                    <i class="fas fa-briefcase mr-2"></i>WORK EXPERIENCE OR BUSINESS DETAILS
                </h2>
                <div id="experienceContainer">
                    <div class="experience-entry border-l-4 border-green-500 pl-4 mb-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-3">Experience 1</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Company Name</label>
                                <input type="text" name="companyName[]" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Designation</label>
                                <input type="text" name="designation[]" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Experience Duration</label>
                                <input type="text" name="experienceDuration[]" placeholder="e.g., 2 years" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                        </div>
                    </div>
                </div>
                <button type="button" id="addExperience" class="add-btn bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md">
                    <i class="fas fa-plus mr-2"></i>Add Another Experience
                </button>
            </div>

            <!-- Visa Processing Information -->
            <div class="form-section bg-white p-6">
                <h2 class="text-xl font-bold text-blue-800 mb-4 border-b-2 border-blue-200 pb-2">
                    <i class="fas fa-passport mr-2"></i>INFORMATION REQUIRED FOR STUDENT VISA PROCESSING
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Last Country Visited for Study</label>
                        <input type="text" id="lastCountryStudy" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Country of Choice</label>
                        <input type="text" id="countryChoice" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">University/Program</label>
                        <input type="text" id="universityProgram" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Passport Number</label>
                        <input type="text" id="passportNumber" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div class="md:col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Why You Decided to Study Abroad</label>
                        <textarea id="whyStudyAbroad" rows="3" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
                    </div>
                    <div class="md:col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Any Balance in Current Country</label>
                        <textarea id="balanceCurrentCountry" rows="2" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
                    </div>
                    <div class="md:col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Visa History or University Application Status</label>
                        <textarea id="visaHistory" rows="3" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
                    </div>
                </div>
            </div>

            <!-- Friend References -->
            <div class="form-section bg-white p-6">
                <h2 class="text-xl font-bold text-blue-800 mb-4 border-b-2 border-blue-200 pb-2">
                    <i class="fas fa-users mr-2"></i>MENTION YOUR FRIENDS WHO ARE STUDYING ABROAD
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Friend 1 Name</label>
                        <input type="text" id="friend1Name" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Friend 1 WhatsApp No.</label>
                        <input type="tel" id="friend1WhatsApp" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Friend 2 Name</label>
                        <input type="text" id="friend2Name" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Friend 2 WhatsApp No.</label>
                        <input type="tel" id="friend2WhatsApp" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                </div>
            </div>

            <!-- Signature Section -->
            <div class="form-section bg-white p-6">
                <h2 class="text-xl font-bold text-blue-800 mb-4 border-b-2 border-blue-200 pb-2">
                    <i class="fas fa-signature mr-2"></i>SIGNATURE
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Date</label>
                        <input type="date" id="signatureDate" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Applicant Signature</label>
                        <input type="text" id="applicantSignature" placeholder="Type your full name" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                </div>
            </div>

            <!-- PDF Generation Section -->
            <div class="form-section bg-white p-6 no-print">
                <h2 class="text-xl font-bold text-blue-800 mb-4 border-b-2 border-blue-200 pb-2">
                    <i class="fas fa-download mr-2"></i>DOWNLOAD 
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-end">
                    <div class="md:col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-1">PDF Filename</label>
                        <input type="text" id="pdfFilename" placeholder="Enter filename (without .pdf extension)" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div class="flex gap-2">
                        <button type="button" id="downloadPDF" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-md font-medium transition-colors">
                            <i class="fas fa-download mr-2"></i>Download PDF
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>

    <script>
        let qualificationCount = 1;
        let experienceCount = 1;

        // Add qualification functionality
        document.getElementById('addQualification').addEventListener('click', function() {
            qualificationCount++;
            const container = document.getElementById('qualificationsContainer');
            const newQualification = document.createElement('div');
            newQualification.className = 'qualification-entry border-l-4 border-blue-500 pl-4 mb-6';
            newQualification.innerHTML = `
                <div class="flex justify-between items-center mb-3">
                    <h3 class="text-lg font-semibold text-gray-800">Qualification ${qualificationCount}</h3>
                    <button type="button" class="remove-qualification text-red-500 hover:text-red-700" onclick="removeQualification(this)">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Recent Qualification</label>
                        <input type="text" name="qualification[]" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Year Award</label>
                        <input type="text" name="yearAward[]" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Grade/CGPA</label>
                        <input type="text" name="gradeCgpa[]" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Board/University</label>
                        <input type="text" name="boardUniversity[]" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                </div>
            `;
            container.appendChild(newQualification);
        });

        // Add experience functionality
        document.getElementById('addExperience').addEventListener('click', function() {
            experienceCount++;
            const container = document.getElementById('experienceContainer');
            const newExperience = document.createElement('div');
            newExperience.className = 'experience-entry border-l-4 border-green-500 pl-4 mb-6';
            newExperience.innerHTML = `
                <div class="flex justify-between items-center mb-3">
                    <h3 class="text-lg font-semibold text-gray-800">Experience ${experienceCount}</h3>
                    <button type="button" class="remove-experience text-red-500 hover:text-red-700" onclick="removeExperience(this)">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Company Name</label>
                        <input type="text" name="companyName[]" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Designation</label>
                        <input type="text" name="designation[]" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Experience Duration</label>
                        <input type="text" name="experienceDuration[]" placeholder="e.g., 2 years" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                </div>
            `;
            container.appendChild(newExperience);
        });

        // Remove qualification
        window.removeQualification = function(button) {
            button.closest('.qualification-entry').remove();
            qualificationCount--;
            updateQualificationNumbers();
        };

        // Remove experience
        window.removeExperience = function(button) {
            button.closest('.experience-entry').remove();
            experienceCount--;
            updateExperienceNumbers();
        };

        // Update numbering after remove
        function updateQualificationNumbers() {
            document.querySelectorAll('.qualification-entry h3').forEach((h3, i) => {
                h3.textContent = `Qualification ${i + 1}`;
            });
        }
        function updateExperienceNumbers() {
            document.querySelectorAll('.experience-entry h3').forEach((h3, i) => {
                h3.textContent = `Experience ${i + 1}`;
            });
        }

        // Set default date for signature
        document.getElementById('signatureDate').valueAsDate = new Date();

        // Set default filename based on applicant name
        document.getElementById('applicantName').addEventListener('input', function() {
            const name = this.value.replace(/\s+/g, '_').toLowerCase();
            if (name) {
                document.getElementById('pdfFilename').value = `${name}_application_form`;
            }
        });

        // PDF Generation
        document.getElementById('downloadPDF').addEventListener('click', function() {
            // Optionally add validation here
            const filename = document.getElementById('pdfFilename').value || 'student_application_form';
            generatePDF(filename);
        });

        function generatePDF(filename) {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF("p", "mm", "a4");
            const pageWidth = doc.internal.pageSize.getWidth();
            let y = 15;

            // Branding Header
            doc.setDrawColor(41, 128, 185);
            doc.setFillColor(41, 128, 185);
            doc.rect(0, 0, pageWidth, 20, "F");
            doc.setFontSize(20);
            doc.setTextColor(255, 255, 255);
            doc.setFont("helvetica", "bold");
            doc.text("Meqat Study Consultants", pageWidth / 2, 12, { align: "center" });
            doc.setFontSize(12);
            doc.setTextColor(255, 255, 255);
            doc.setFont("helvetica", "normal");
            doc.text("Student Application Form", pageWidth / 2, 18, { align: "center" });

            y = 28;
            doc.setFontSize(10);
            doc.setTextColor(100, 100, 100);
            doc.text("Start your professional journey to a brighter future here", pageWidth / 2, y, { align: "center" });
            y += 6;

            // Section Helper
            function sectionTitle(title) {
                y += 8;
                doc.setTextColor(41, 128, 185);
                doc.setFontSize(14);
                doc.setFont("helvetica", "bold");
                doc.text(title, 12, y);
                y += 2;
                doc.setDrawColor(41, 128, 185);
                doc.setLineWidth(0.5);
                doc.line(12, y, pageWidth - 12, y);
                y += 3;
                doc.setFontSize(11);
                doc.setFont("helvetica", "normal");
                doc.setTextColor(50, 50, 50);
            }

            // Section: Personal Information
            sectionTitle("PERSONAL INFORMATION");
            const personal = [
                ["Applicant Name", document.getElementById("applicantName").value],
                ["Date of Birth", document.getElementById("dateOfBirth").value],
                ["Father's Name", document.getElementById("fatherName").value],
                ["Marital Status", document.getElementById("maritalStatus").value],
                ["Mobile No.", document.getElementById("mobileNo").value],
                ["Email", document.getElementById("email").value],
                ["WhatsApp No.", document.getElementById("whatsappNo").value]
            ];
            doc.autoTable({
                startY: y,
                head: [["Field", "Value"]],
                body: personal,
                theme: "grid",
                headStyles: { fillColor: [41, 128, 185], textColor: 255 },
                styles: { fontSize: 10, cellPadding: 2 },
                margin: { left: 12, right: 12 }
            });
            y = doc.lastAutoTable.finalY + 5;

            // Section: Educational Information
            sectionTitle("EDUCATIONAL INFORMATION");
            // Gather qualifications
            const qualRows = [];
            document.querySelectorAll('.qualification-entry').forEach((entry, i) => {
                qualRows.push([
                    entry.querySelector('input[name="qualification[]"]').value,
                    entry.querySelector('input[name="yearAward[]"]').value,
                    entry.querySelector('input[name="gradeCgpa[]"]').value,
                    entry.querySelector('input[name="boardUniversity[]"]').value
                ]);
            });
            doc.autoTable({
                startY: y,
                head: [["Recent Qualification", "Year Award", "Grade/CGPA", "Board/University"]],
                body: qualRows,
                theme: "striped",
                headStyles: { fillColor: [41, 128, 185], textColor: 255 },
                styles: { fontSize: 10, cellPadding: 2 },
                margin: { left: 12, right: 12 }
            });
            y = doc.lastAutoTable.finalY + 3;

            // English Test & Subject
            const englishTest = document.getElementById("englishTest").value;
            const subject = document.getElementById("subject").value;
            if (englishTest || subject) {
                doc.setFontSize(11);
                if (englishTest) doc.text(`English Test: ${englishTest}`, 14, y += 7);
                if (subject) doc.text(`Subject: ${subject}`, 14, y += 7);
            }
            y += 2;

            // Section: Work Experience
            sectionTitle("WORK EXPERIENCE OR BUSINESS DETAILS");
            const expRows = [];
            document.querySelectorAll('.experience-entry').forEach((entry, i) => {
                expRows.push([
                    entry.querySelector('input[name="companyName[]"]').value,
                    entry.querySelector('input[name="designation[]"]').value,
                    entry.querySelector('input[name="experienceDuration[]"]').value
                ]);
            });
            doc.autoTable({
                startY: y,
                head: [["Company Name", "Designation", "Experience Duration"]],
                body: expRows,
                theme: "striped",
                headStyles: { fillColor: [41, 128, 185], textColor: 255 },
                styles: { fontSize: 10, cellPadding: 2 },
                margin: { left: 12, right: 12 }
            });
            y = doc.lastAutoTable.finalY + 3;

            // Section: Visa Processing Information
            sectionTitle("INFORMATION REQUIRED FOR STUDENT VISA PROCESSING");
            const visaInfo = [
                ["Last Country Visited for Study", document.getElementById("lastCountryStudy").value],
                ["Country of Choice", document.getElementById("countryChoice").value],
                ["University/Program", document.getElementById("universityProgram").value],
                ["Passport Number", document.getElementById("passportNumber").value],
                ["Why You Decided to Study Abroad", document.getElementById("whyStudyAbroad").value],
                ["Any Balance in Current Country", document.getElementById("balanceCurrentCountry").value],
                ["Visa History or University Application Status", document.getElementById("visaHistory").value]
            ];
            doc.autoTable({
                startY: y,
                head: [["Field", "Value"]],
                body: visaInfo,
                theme: "grid",
                headStyles: { fillColor: [41, 128, 185], textColor: 255 },
                styles: { fontSize: 10, cellPadding: 2 },
                margin: { left: 12, right: 12 }
            });
            y = doc.lastAutoTable.finalY + 5;

            // Section: Friends Reference
            sectionTitle("FRIENDS STUDYING ABROAD");
            const friends = [
                ["Friend 1 Name", document.getElementById("friend1Name").value],
                ["Friend 1 WhatsApp No.", document.getElementById("friend1WhatsApp").value],
                ["Friend 2 Name", document.getElementById("friend2Name").value],
                ["Friend 2 WhatsApp No.", document.getElementById("friend2WhatsApp").value]
            ];
            doc.autoTable({
                startY: y,
                head: [["Field", "Value"]],
                body: friends,
                theme: "grid",
                headStyles: { fillColor: [41, 128, 185], textColor: 255 },
                styles: { fontSize: 10, cellPadding: 2 },
                margin: { left: 12, right: 12 }
            });
            y = doc.lastAutoTable.finalY + 5;

            // Section: Signature
            sectionTitle("SIGNATURE");
            const signDate = document.getElementById("signatureDate").value;
            const applicantSignature = document.getElementById("applicantSignature").value;
            doc.text(`Date: ${signDate}`, 14, y += 8);
            doc.text(`Applicant Signature: ${applicantSignature}`, 14, y += 8);

            // Footer
            doc.setFontSize(9);
            doc.setTextColor(170, 170, 170);
            doc.text("Generated by Meqat Study Consultants Application Form", pageWidth / 2, 290, { align: "center" });

            doc.save(filename + ".pdf");
        }
    </script>
</body>
</html>